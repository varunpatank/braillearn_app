"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/rewards/page",{

/***/ "(app-pages-browser)/./src/utils/db/actions.ts":
/*!*********************************!*\
  !*** ./src/utils/db/actions.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createReport: function() { return /* binding */ createReport; },\n/* harmony export */   createTransaction: function() { return /* binding */ createTransaction; },\n/* harmony export */   createUser: function() { return /* binding */ createUser; },\n/* harmony export */   getAllRewards: function() { return /* binding */ getAllRewards; },\n/* harmony export */   getAvailableRewards: function() { return /* binding */ getAvailableRewards; },\n/* harmony export */   getRecentReports: function() { return /* binding */ getRecentReports; },\n/* harmony export */   getRewardTransactions: function() { return /* binding */ getRewardTransactions; },\n/* harmony export */   getUnreadNotifications: function() { return /* binding */ getUnreadNotifications; },\n/* harmony export */   getUserByEmail: function() { return /* binding */ getUserByEmail; },\n/* harmony export */   markNotificationAsRead: function() { return /* binding */ markNotificationAsRead; },\n/* harmony export */   redeemReward: function() { return /* binding */ redeemReward; },\n/* harmony export */   updateRewardPoints: function() { return /* binding */ updateRewardPoints; },\n/* harmony export */   updateWasteLocationStatus: function() { return /* binding */ updateWasteLocationStatus; }\n/* harmony export */ });\n/* harmony import */ var _dbConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dbConfig */ \"(app-pages-browser)/./src/utils/db/dbConfig.ts\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(app-pages-browser)/./src/utils/db/schema.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm */ \"(app-pages-browser)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm */ \"(app-pages-browser)/./node_modules/drizzle-orm/sql/expressions/select.js\");\n\n\n\n// In-memory storage for notifications and reports\nlet notifications = [];\nlet reports = [];\nlet nextReportId = 1;\nlet nextNotificationId = 1;\nasync function createUser(email, name) {\n    try {\n        // Attempt to insert a new user.\n        // If a conflict occurs on the email field, do nothing.\n        const [newUser] = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.Users).values({\n            email,\n            name,\n            totalPoints: 0,\n            totalWaste: \"0\",\n            totalReports: 0\n        }).onConflictDoNothing() // This prevents duplicate key error\n        .returning();\n        // If the insert did not create a new record, fetch the existing user.\n        if (!newUser) {\n            const [existingUser] = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.Users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.Users.email, email));\n            return existingUser;\n        }\n        return newUser;\n    } catch (error) {\n        console.error(\"Error creating user:\", error);\n        throw error;\n    }\n}\nasync function getUserByEmail(email) {\n    try {\n        const [user] = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.Users).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.Users.email, email));\n        return user;\n    } catch (error) {\n        console.error(\"Error getting user by email:\", error);\n        throw error;\n    }\n}\nfunction calculatePoints(difficulty, amount) {\n    const basePoints = 5;\n    const multiplier = difficulty === \"Easy\" ? 1 : difficulty === \"Medium\" ? 4 : 8;\n    return Math.floor(amount * basePoints * multiplier);\n}\nasync function createReport(userId, location, latitude, longitude, wasteType, amount, imageUrl) {\n    try {\n        var _amount_match;\n        const numericAmount = parseFloat(((_amount_match = amount.match(/\\d+(\\.\\d+)?/)) === null || _amount_match === void 0 ? void 0 : _amount_match[0]) || \"0\");\n        const difficulty = numericAmount <= 5 ? \"Easy\" : numericAmount <= 20 ? \"Medium\" : \"Hard\";\n        const points = calculatePoints(difficulty, numericAmount);\n        // Create in-memory report\n        const report = {\n            id: nextReportId++,\n            location,\n            wasteType,\n            amount,\n            createdAt: new Date().toISOString(),\n            latitude,\n            longitude\n        };\n        // Add to in-memory storage\n        reports.unshift(report);\n        // Update user's total points and waste\n        await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.update(_schema__WEBPACK_IMPORTED_MODULE_1__.Users).set({\n            totalPoints: _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.raw(\"total_points + \" + points),\n            totalWaste: _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.raw(\"total_waste + \" + numericAmount),\n            totalReports: _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.raw(\"total_reports + 1\")\n        }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.Users.id, userId));\n        // Store points in database\n        await createTransaction(userId, \"earned_report\", points, \"Reported \".concat(amount, \" of \").concat(wasteType, \" waste\"));\n        await updateRewardPoints(userId, points);\n        // Create notification\n        notifications.push({\n            id: nextNotificationId++,\n            userId,\n            message: \"You've earned \".concat(points, \" points for reporting waste!\"),\n            type: \"reward\",\n            read: false,\n            createdAt: new Date()\n        });\n        return report;\n    } catch (error) {\n        console.error(\"Error creating report:\", error);\n        throw error;\n    }\n}\nasync function getRecentReports() {\n    let limit = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 10;\n    return reports.slice(0, limit);\n}\nasync function getUnreadNotifications(userId) {\n    return notifications.filter((n)=>n.userId === userId && !n.read);\n}\nasync function markNotificationAsRead(notificationId) {\n    const notification = notifications.find((n)=>n.id === notificationId);\n    if (notification) {\n        notification.read = true;\n    }\n}\nasync function getRewardTransactions(userId) {\n    try {\n        const transactions = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.Transactions).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.Transactions.userId, userId)).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.Transactions.createdAt));\n        return transactions;\n    } catch (error) {\n        console.error(\"Error fetching reward transactions:\", error);\n        return [];\n    }\n}\nasync function createTransaction(userId, type, amount, description) {\n    try {\n        const [transaction] = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.Transactions).values({\n            userId,\n            type,\n            amount,\n            description\n        }).returning();\n        return transaction;\n    } catch (error) {\n        console.error(\"Error creating transaction:\", error);\n        throw error;\n    }\n}\nasync function updateRewardPoints(userId, points) {\n    try {\n        const [reward] = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.insert(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards).values({\n            userId,\n            points,\n            name: \"Points Reward\",\n            description: \"Points earned from waste reporting\",\n            collectionInfo: \"Automatically collected\",\n            level: Math.floor(points / 100) + 1\n        }).returning();\n        return reward;\n    } catch (error) {\n        console.error(\"Error updating reward points:\", error);\n        throw error;\n    }\n}\nasync function getAllRewards() {\n    try {\n        const rewards = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.select({\n            id: _schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.id,\n            userId: _schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.userId,\n            points: _schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.points,\n            level: _schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.level,\n            createdAt: _schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.createdAt,\n            userName: _schema__WEBPACK_IMPORTED_MODULE_1__.Users.name\n        }).from(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards).leftJoin(_schema__WEBPACK_IMPORTED_MODULE_1__.Users, (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.userId, _schema__WEBPACK_IMPORTED_MODULE_1__.Users.id)).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.points));\n        return rewards;\n    } catch (error) {\n        console.error(\"Error fetching all rewards:\", error);\n        return [];\n    }\n}\nasync function getAvailableRewards(userId) {\n    try {\n        const rewards = await _dbConfig__WEBPACK_IMPORTED_MODULE_0__.db.select().from(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_2__.eq)(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.userId, userId)).orderBy((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_3__.desc)(_schema__WEBPACK_IMPORTED_MODULE_1__.Rewards.createdAt));\n        return rewards;\n    } catch (error) {\n        console.error(\"Error fetching available rewards:\", error);\n        return [];\n    }\n}\nasync function redeemReward(userId, points) {\n    try {\n        await createTransaction(userId, \"redeemed\", points, \"Redeemed \".concat(points, \" points\"));\n    } catch (error) {\n        console.error(\"Error redeeming reward:\", error);\n        throw error;\n    }\n}\nasync function updateWasteLocationStatus(locationId, userId, status, verificationResult) {\n    try {\n        const points = calculatePoints(verificationResult.difficulty || \"Medium\", parseFloat(verificationResult.quantity) || 0);\n        await createTransaction(userId, \"earned_collect\", points, \"Completed waste collection task\");\n        await updateRewardPoints(userId, points);\n        notifications.push({\n            id: nextNotificationId++,\n            userId,\n            message: \"You've earned \".concat(points, \" points for collecting waste!\"),\n            type: \"reward\",\n            read: false,\n            createdAt: new Date()\n        });\n    } catch (error) {\n        console.error(\"Error updating waste location status:\", error);\n        throw error;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy91dGlscy9kYi9hY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdDO0FBVWQ7QUFDcUI7QUFFdkMsa0RBQWtEO0FBQ2xELElBQUlNLGdCQU9DLEVBQUU7QUFFUCxJQUFJQyxVQUFvQixFQUFFO0FBQzFCLElBQUlDLGVBQWU7QUFDbkIsSUFBSUMscUJBQXFCO0FBRWxCLGVBQWVDLFdBQVdDLEtBQWEsRUFBRUMsSUFBWTtJQUMxRCxJQUFJO1FBQ0YsZ0NBQWdDO1FBQ2hDLHVEQUF1RDtRQUN2RCxNQUFNLENBQUNDLFFBQVEsR0FBRyxNQUFNYix5Q0FBRUEsQ0FDdkJjLE1BQU0sQ0FBQ2IsMENBQUtBLEVBQ1pjLE1BQU0sQ0FBQztZQUNOSjtZQUNBQztZQUNBSSxhQUFhO1lBQ2JDLFlBQVk7WUFDWkMsY0FBYztRQUNoQixHQUNDQyxtQkFBbUIsR0FBRyxvQ0FBb0M7U0FDMURDLFNBQVM7UUFFWixzRUFBc0U7UUFDdEUsSUFBSSxDQUFDUCxTQUFTO1lBQ1osTUFBTSxDQUFDUSxhQUFhLEdBQUcsTUFBTXJCLHlDQUFFQSxDQUM1QnNCLE1BQU0sR0FDTkMsSUFBSSxDQUFDdEIsMENBQUtBLEVBQ1Z1QixLQUFLLENBQUNwQiwrQ0FBRUEsQ0FBQ0gsMENBQUtBLENBQUNVLEtBQUssRUFBRUE7WUFDekIsT0FBT1U7UUFDVDtRQUVBLE9BQU9SO0lBQ1QsRUFBRSxPQUFPWSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx3QkFBd0JBO1FBQ3RDLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWVFLGVBQWVoQixLQUFhO0lBQ2hELElBQUk7UUFDRixNQUFNLENBQUNpQixLQUFLLEdBQUcsTUFBTTVCLHlDQUFFQSxDQUNwQnNCLE1BQU0sR0FDTkMsSUFBSSxDQUFDdEIsMENBQUtBLEVBQ1Z1QixLQUFLLENBQUNwQiwrQ0FBRUEsQ0FBQ0gsMENBQUtBLENBQUNVLEtBQUssRUFBRUE7UUFDekIsT0FBT2lCO0lBQ1QsRUFBRSxPQUFPSCxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLFNBQVNJLGdCQUFnQkMsVUFBa0IsRUFBRUMsTUFBYztJQUN6RCxNQUFNQyxhQUFhO0lBQ25CLE1BQU1DLGFBQWFILGVBQWUsU0FBUyxJQUN6QkEsZUFBZSxXQUFXLElBQzFCO0lBQ2xCLE9BQU9JLEtBQUtDLEtBQUssQ0FBQ0osU0FBU0MsYUFBYUM7QUFDMUM7QUFFTyxlQUFlRyxhQUNwQkMsTUFBYyxFQUNkQyxRQUFnQixFQUNoQkMsUUFBZ0IsRUFDaEJDLFNBQWlCLEVBQ2pCQyxTQUFpQixFQUNqQlYsTUFBYyxFQUNkVyxRQUFpQjtJQUVqQixJQUFJO1lBQytCWDtRQUFqQyxNQUFNWSxnQkFBZ0JDLFdBQVdiLEVBQUFBLGdCQUFBQSxPQUFPYyxLQUFLLENBQUMsNEJBQWJkLG9DQUFBQSxhQUE2QixDQUFDLEVBQUUsS0FBSTtRQUNyRSxNQUFNRCxhQUFhYSxpQkFBaUIsSUFBSSxTQUN0QkEsaUJBQWlCLEtBQUssV0FDdEI7UUFDbEIsTUFBTUcsU0FBU2pCLGdCQUFnQkMsWUFBWWE7UUFFM0MsMEJBQTBCO1FBQzFCLE1BQU1JLFNBQWlCO1lBQ3JCQyxJQUFJeEM7WUFDSjhCO1lBQ0FHO1lBQ0FWO1lBQ0FrQixXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDakNaO1lBQ0FDO1FBQ0Y7UUFFQSwyQkFBMkI7UUFDM0JqQyxRQUFRNkMsT0FBTyxDQUFDTDtRQUVoQix1Q0FBdUM7UUFDdkMsTUFBTS9DLHlDQUFFQSxDQUNMcUQsTUFBTSxDQUFDcEQsMENBQUtBLEVBQ1pxRCxHQUFHLENBQUM7WUFDSHRDLGFBQWFoQix5Q0FBRUEsQ0FBQ3VELEdBQUcsQ0FBQyxvQkFBb0JUO1lBQ3hDN0IsWUFBWWpCLHlDQUFFQSxDQUFDdUQsR0FBRyxDQUFDLG1CQUFtQlo7WUFDdEN6QixjQUFjbEIseUNBQUVBLENBQUN1RCxHQUFHLENBQUM7UUFDdkIsR0FDQy9CLEtBQUssQ0FBQ3BCLCtDQUFFQSxDQUFDSCwwQ0FBS0EsQ0FBQytDLEVBQUUsRUFBRVg7UUFFdEIsMkJBQTJCO1FBQzNCLE1BQU1tQixrQkFBa0JuQixRQUFRLGlCQUFpQlMsUUFBUSxZQUF5QkwsT0FBYlYsUUFBTyxRQUFnQixPQUFWVSxXQUFVO1FBQzVGLE1BQU1nQixtQkFBbUJwQixRQUFRUztRQUVqQyxzQkFBc0I7UUFDdEJ4QyxjQUFjb0QsSUFBSSxDQUFDO1lBQ2pCVixJQUFJdkM7WUFDSjRCO1lBQ0FzQixTQUFTLGlCQUF3QixPQUFQYixRQUFPO1lBQ2pDYyxNQUFNO1lBQ05DLE1BQU07WUFDTlosV0FBVyxJQUFJQztRQUNqQjtRQUVBLE9BQU9IO0lBQ1QsRUFBRSxPQUFPdEIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMEJBQTBCQTtRQUN4QyxNQUFNQTtJQUNSO0FBQ0Y7QUFFTyxlQUFlcUM7UUFBaUJDLFFBQUFBLGlFQUFRO0lBQzdDLE9BQU94RCxRQUFReUQsS0FBSyxDQUFDLEdBQUdEO0FBQzFCO0FBRU8sZUFBZUUsdUJBQXVCNUIsTUFBYztJQUN6RCxPQUFPL0IsY0FBYzRELE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRTlCLE1BQU0sS0FBS0EsVUFBVSxDQUFDOEIsRUFBRU4sSUFBSTtBQUNqRTtBQUVPLGVBQWVPLHVCQUF1QkMsY0FBc0I7SUFDakUsTUFBTUMsZUFBZWhFLGNBQWNpRSxJQUFJLENBQUNKLENBQUFBLElBQUtBLEVBQUVuQixFQUFFLEtBQUtxQjtJQUN0RCxJQUFJQyxjQUFjO1FBQ2hCQSxhQUFhVCxJQUFJLEdBQUc7SUFDdEI7QUFDRjtBQUVPLGVBQWVXLHNCQUFzQm5DLE1BQWM7SUFDeEQsSUFBSTtRQUNGLE1BQU1vQyxlQUFlLE1BQU16RSx5Q0FBRUEsQ0FDMUJzQixNQUFNLEdBQ05DLElBQUksQ0FBQ3BCLGlEQUFZQSxFQUNqQnFCLEtBQUssQ0FBQ3BCLCtDQUFFQSxDQUFDRCxpREFBWUEsQ0FBQ2tDLE1BQU0sRUFBRUEsU0FDOUJxQyxPQUFPLENBQUNyRSxpREFBSUEsQ0FBQ0YsaURBQVlBLENBQUM4QyxTQUFTO1FBRXRDLE9BQU93QjtJQUNULEVBQUUsT0FBT2hELE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVDQUF1Q0E7UUFDckQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVPLGVBQWUrQixrQkFDcEJuQixNQUFjLEVBQ2R1QixJQUFZLEVBQ1o3QixNQUFjLEVBQ2Q0QyxXQUFtQjtJQUVuQixJQUFJO1FBQ0YsTUFBTSxDQUFDQyxZQUFZLEdBQUcsTUFBTTVFLHlDQUFFQSxDQUMzQmMsTUFBTSxDQUFDWCxpREFBWUEsRUFDbkJZLE1BQU0sQ0FBQztZQUNOc0I7WUFDQXVCO1lBQ0E3QjtZQUNBNEM7UUFDRixHQUNDdkQsU0FBUztRQUNaLE9BQU93RDtJQUNULEVBQUUsT0FBT25ELE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsTUFBTUE7SUFDUjtBQUNGO0FBRU8sZUFBZWdDLG1CQUFtQnBCLE1BQWMsRUFBRVMsTUFBYztJQUNyRSxJQUFJO1FBQ0YsTUFBTSxDQUFDK0IsT0FBTyxHQUFHLE1BQU03RSx5Q0FBRUEsQ0FDdEJjLE1BQU0sQ0FBQ1osNENBQU9BLEVBQ2RhLE1BQU0sQ0FBQztZQUNOc0I7WUFDQVM7WUFDQWxDLE1BQU07WUFDTitELGFBQWE7WUFDYkcsZ0JBQWdCO1lBQ2hCQyxPQUFPN0MsS0FBS0MsS0FBSyxDQUFDVyxTQUFTLE9BQU87UUFDcEMsR0FDQzFCLFNBQVM7UUFDWixPQUFPeUQ7SUFDVCxFQUFFLE9BQU9wRCxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWV1RDtJQUNwQixJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNakYseUNBQUVBLENBQ3JCc0IsTUFBTSxDQUFDO1lBQ04wQixJQUFJOUMsNENBQU9BLENBQUM4QyxFQUFFO1lBQ2RYLFFBQVFuQyw0Q0FBT0EsQ0FBQ21DLE1BQU07WUFDdEJTLFFBQVE1Qyw0Q0FBT0EsQ0FBQzRDLE1BQU07WUFDdEJpQyxPQUFPN0UsNENBQU9BLENBQUM2RSxLQUFLO1lBQ3BCOUIsV0FBVy9DLDRDQUFPQSxDQUFDK0MsU0FBUztZQUM1QmlDLFVBQVVqRiwwQ0FBS0EsQ0FBQ1csSUFBSTtRQUN0QixHQUNDVyxJQUFJLENBQUNyQiw0Q0FBT0EsRUFDWmlGLFFBQVEsQ0FBQ2xGLDBDQUFLQSxFQUFFRywrQ0FBRUEsQ0FBQ0YsNENBQU9BLENBQUNtQyxNQUFNLEVBQUVwQywwQ0FBS0EsQ0FBQytDLEVBQUUsR0FDM0MwQixPQUFPLENBQUNyRSxpREFBSUEsQ0FBQ0gsNENBQU9BLENBQUM0QyxNQUFNO1FBQzlCLE9BQU9tQztJQUNULEVBQUUsT0FBT3hELE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVPLGVBQWUyRCxvQkFBb0IvQyxNQUFjO0lBQ3RELElBQUk7UUFDRixNQUFNNEMsVUFBVSxNQUFNakYseUNBQUVBLENBQ3JCc0IsTUFBTSxHQUNOQyxJQUFJLENBQUNyQiw0Q0FBT0EsRUFDWnNCLEtBQUssQ0FBQ3BCLCtDQUFFQSxDQUFDRiw0Q0FBT0EsQ0FBQ21DLE1BQU0sRUFBRUEsU0FDekJxQyxPQUFPLENBQUNyRSxpREFBSUEsQ0FBQ0gsNENBQU9BLENBQUMrQyxTQUFTO1FBQ2pDLE9BQU9nQztJQUNULEVBQUUsT0FBT3hELE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHFDQUFxQ0E7UUFDbkQsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVPLGVBQWU0RCxhQUFhaEQsTUFBYyxFQUFFUyxNQUFjO0lBQy9ELElBQUk7UUFDRixNQUFNVSxrQkFBa0JuQixRQUFRLFlBQVlTLFFBQVEsWUFBbUIsT0FBUEEsUUFBTztJQUN6RSxFQUFFLE9BQU9yQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWU2RCwwQkFDcEJDLFVBQWtCLEVBQ2xCbEQsTUFBYyxFQUNkbUQsTUFBYyxFQUNkQyxrQkFBdUI7SUFFdkIsSUFBSTtRQUNGLE1BQU0zQyxTQUFTakIsZ0JBQ2I0RCxtQkFBbUIzRCxVQUFVLElBQUksVUFDakNjLFdBQVc2QyxtQkFBbUJDLFFBQVEsS0FBSztRQUc3QyxNQUFNbEMsa0JBQWtCbkIsUUFBUSxrQkFBa0JTLFFBQVM7UUFDM0QsTUFBTVcsbUJBQW1CcEIsUUFBUVM7UUFFakN4QyxjQUFjb0QsSUFBSSxDQUFDO1lBQ2pCVixJQUFJdkM7WUFDSjRCO1lBQ0FzQixTQUFTLGlCQUF3QixPQUFQYixRQUFPO1lBQ2pDYyxNQUFNO1lBQ05DLE1BQU07WUFDTlosV0FBVyxJQUFJQztRQUNqQjtJQUNGLEVBQUUsT0FBT3pCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlDQUF5Q0E7UUFDdkQsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy91dGlscy9kYi9hY3Rpb25zLnRzP2Y4ZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGIgfSBmcm9tICcuL2RiQ29uZmlnJztcbmltcG9ydCB7IFxuICBVc2VycywgXG4gIFJld2FyZHMsIFxuICBUcmFuc2FjdGlvbnMsXG4gIHR5cGUgVXNlcixcbiAgdHlwZSBSZXdhcmQsXG4gIHR5cGUgVHJhbnNhY3Rpb24sXG4gIHR5cGUgUmVwb3J0LFxuICB0eXBlIE5ld1Jld2FyZFxufSBmcm9tICcuL3NjaGVtYSc7XG5pbXBvcnQgeyBlcSwgZGVzYyB9IGZyb20gJ2RyaXp6bGUtb3JtJztcblxuLy8gSW4tbWVtb3J5IHN0b3JhZ2UgZm9yIG5vdGlmaWNhdGlvbnMgYW5kIHJlcG9ydHNcbmxldCBub3RpZmljYXRpb25zOiBBcnJheTx7XG4gIGlkOiBudW1iZXI7XG4gIHVzZXJJZDogbnVtYmVyO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgcmVhZDogYm9vbGVhbjtcbiAgY3JlYXRlZEF0OiBEYXRlO1xufT4gPSBbXTtcblxubGV0IHJlcG9ydHM6IFJlcG9ydFtdID0gW107XG5sZXQgbmV4dFJlcG9ydElkID0gMTtcbmxldCBuZXh0Tm90aWZpY2F0aW9uSWQgPSAxO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcihlbWFpbDogc3RyaW5nLCBuYW1lOiBzdHJpbmcpOiBQcm9taXNlPFVzZXI+IHtcbiAgdHJ5IHtcbiAgICAvLyBBdHRlbXB0IHRvIGluc2VydCBhIG5ldyB1c2VyLlxuICAgIC8vIElmIGEgY29uZmxpY3Qgb2NjdXJzIG9uIHRoZSBlbWFpbCBmaWVsZCwgZG8gbm90aGluZy5cbiAgICBjb25zdCBbbmV3VXNlcl0gPSBhd2FpdCBkYlxuICAgICAgLmluc2VydChVc2VycylcbiAgICAgIC52YWx1ZXMoe1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdG90YWxQb2ludHM6IDAsXG4gICAgICAgIHRvdGFsV2FzdGU6ICcwJyxcbiAgICAgICAgdG90YWxSZXBvcnRzOiAwXG4gICAgICB9KVxuICAgICAgLm9uQ29uZmxpY3REb05vdGhpbmcoKSAvLyBUaGlzIHByZXZlbnRzIGR1cGxpY2F0ZSBrZXkgZXJyb3JcbiAgICAgIC5yZXR1cm5pbmcoKTtcblxuICAgIC8vIElmIHRoZSBpbnNlcnQgZGlkIG5vdCBjcmVhdGUgYSBuZXcgcmVjb3JkLCBmZXRjaCB0aGUgZXhpc3RpbmcgdXNlci5cbiAgICBpZiAoIW5ld1VzZXIpIHtcbiAgICAgIGNvbnN0IFtleGlzdGluZ1VzZXJdID0gYXdhaXQgZGJcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5mcm9tKFVzZXJzKVxuICAgICAgICAud2hlcmUoZXEoVXNlcnMuZW1haWwsIGVtYWlsKSk7XG4gICAgICByZXR1cm4gZXhpc3RpbmdVc2VyO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdVc2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyB1c2VyOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCB1bmRlZmluZWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBbdXNlcl0gPSBhd2FpdCBkYlxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuZnJvbShVc2VycylcbiAgICAgIC53aGVyZShlcShVc2Vycy5lbWFpbCwgZW1haWwpKTtcbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXIgYnkgZW1haWw6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVBvaW50cyhkaWZmaWN1bHR5OiBzdHJpbmcsIGFtb3VudDogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgYmFzZVBvaW50cyA9IDU7XG4gIGNvbnN0IG11bHRpcGxpZXIgPSBkaWZmaWN1bHR5ID09PSAnRWFzeScgPyAxIDogXG4gICAgICAgICAgICAgICAgICAgIGRpZmZpY3VsdHkgPT09ICdNZWRpdW0nID8gNCA6IFxuICAgICAgICAgICAgICAgICAgICA4O1xuICByZXR1cm4gTWF0aC5mbG9vcihhbW91bnQgKiBiYXNlUG9pbnRzICogbXVsdGlwbGllcik7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVSZXBvcnQoXG4gIHVzZXJJZDogbnVtYmVyLFxuICBsb2NhdGlvbjogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbiAgd2FzdGVUeXBlOiBzdHJpbmcsXG4gIGFtb3VudDogc3RyaW5nLFxuICBpbWFnZVVybD86IHN0cmluZ1xuKTogUHJvbWlzZTxSZXBvcnQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBudW1lcmljQW1vdW50ID0gcGFyc2VGbG9hdChhbW91bnQubWF0Y2goL1xcZCsoXFwuXFxkKyk/Lyk/LlswXSB8fCAnMCcpO1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBudW1lcmljQW1vdW50IDw9IDUgPyAnRWFzeScgOiBcbiAgICAgICAgICAgICAgICAgICAgICBudW1lcmljQW1vdW50IDw9IDIwID8gJ01lZGl1bScgOiBcbiAgICAgICAgICAgICAgICAgICAgICAnSGFyZCc7XG4gICAgY29uc3QgcG9pbnRzID0gY2FsY3VsYXRlUG9pbnRzKGRpZmZpY3VsdHksIG51bWVyaWNBbW91bnQpO1xuXG4gICAgLy8gQ3JlYXRlIGluLW1lbW9yeSByZXBvcnRcbiAgICBjb25zdCByZXBvcnQ6IFJlcG9ydCA9IHtcbiAgICAgIGlkOiBuZXh0UmVwb3J0SWQrKyxcbiAgICAgIGxvY2F0aW9uLFxuICAgICAgd2FzdGVUeXBlLFxuICAgICAgYW1vdW50LFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBsYXRpdHVkZSxcbiAgICAgIGxvbmdpdHVkZVxuICAgIH07XG5cbiAgICAvLyBBZGQgdG8gaW4tbWVtb3J5IHN0b3JhZ2VcbiAgICByZXBvcnRzLnVuc2hpZnQocmVwb3J0KTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyJ3MgdG90YWwgcG9pbnRzIGFuZCB3YXN0ZVxuICAgIGF3YWl0IGRiXG4gICAgICAudXBkYXRlKFVzZXJzKVxuICAgICAgLnNldCh7XG4gICAgICAgIHRvdGFsUG9pbnRzOiBkYi5yYXcoJ3RvdGFsX3BvaW50cyArICcgKyBwb2ludHMpLFxuICAgICAgICB0b3RhbFdhc3RlOiBkYi5yYXcoJ3RvdGFsX3dhc3RlICsgJyArIG51bWVyaWNBbW91bnQpLFxuICAgICAgICB0b3RhbFJlcG9ydHM6IGRiLnJhdygndG90YWxfcmVwb3J0cyArIDEnKVxuICAgICAgfSlcbiAgICAgIC53aGVyZShlcShVc2Vycy5pZCwgdXNlcklkKSk7XG5cbiAgICAvLyBTdG9yZSBwb2ludHMgaW4gZGF0YWJhc2VcbiAgICBhd2FpdCBjcmVhdGVUcmFuc2FjdGlvbih1c2VySWQsICdlYXJuZWRfcmVwb3J0JywgcG9pbnRzLCBgUmVwb3J0ZWQgJHthbW91bnR9IG9mICR7d2FzdGVUeXBlfSB3YXN0ZWApO1xuICAgIGF3YWl0IHVwZGF0ZVJld2FyZFBvaW50cyh1c2VySWQsIHBvaW50cyk7XG5cbiAgICAvLyBDcmVhdGUgbm90aWZpY2F0aW9uXG4gICAgbm90aWZpY2F0aW9ucy5wdXNoKHtcbiAgICAgIGlkOiBuZXh0Tm90aWZpY2F0aW9uSWQrKyxcbiAgICAgIHVzZXJJZCxcbiAgICAgIG1lc3NhZ2U6IGBZb3UndmUgZWFybmVkICR7cG9pbnRzfSBwb2ludHMgZm9yIHJlcG9ydGluZyB3YXN0ZSFgLFxuICAgICAgdHlwZTogJ3Jld2FyZCcsXG4gICAgICByZWFkOiBmYWxzZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlcG9ydDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyByZXBvcnQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRSZXBvcnRzKGxpbWl0ID0gMTApOiBQcm9taXNlPFJlcG9ydFtdPiB7XG4gIHJldHVybiByZXBvcnRzLnNsaWNlKDAsIGxpbWl0KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVucmVhZE5vdGlmaWNhdGlvbnModXNlcklkOiBudW1iZXIpIHtcbiAgcmV0dXJuIG5vdGlmaWNhdGlvbnMuZmlsdGVyKG4gPT4gbi51c2VySWQgPT09IHVzZXJJZCAmJiAhbi5yZWFkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1hcmtOb3RpZmljYXRpb25Bc1JlYWQobm90aWZpY2F0aW9uSWQ6IG51bWJlcikge1xuICBjb25zdCBub3RpZmljYXRpb24gPSBub3RpZmljYXRpb25zLmZpbmQobiA9PiBuLmlkID09PSBub3RpZmljYXRpb25JZCk7XG4gIGlmIChub3RpZmljYXRpb24pIHtcbiAgICBub3RpZmljYXRpb24ucmVhZCA9IHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJld2FyZFRyYW5zYWN0aW9ucyh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8VHJhbnNhY3Rpb25bXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRyYW5zYWN0aW9ucyA9IGF3YWl0IGRiXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5mcm9tKFRyYW5zYWN0aW9ucylcbiAgICAgIC53aGVyZShlcShUcmFuc2FjdGlvbnMudXNlcklkLCB1c2VySWQpKVxuICAgICAgLm9yZGVyQnkoZGVzYyhUcmFuc2FjdGlvbnMuY3JlYXRlZEF0KSk7XG5cbiAgICByZXR1cm4gdHJhbnNhY3Rpb25zO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJld2FyZCB0cmFuc2FjdGlvbnM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVHJhbnNhY3Rpb24oXG4gIHVzZXJJZDogbnVtYmVyLFxuICB0eXBlOiBzdHJpbmcsXG4gIGFtb3VudDogbnVtYmVyLFxuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4pOiBQcm9taXNlPFRyYW5zYWN0aW9uPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgW3RyYW5zYWN0aW9uXSA9IGF3YWl0IGRiXG4gICAgICAuaW5zZXJ0KFRyYW5zYWN0aW9ucylcbiAgICAgIC52YWx1ZXMoe1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGFtb3VudCxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICB9KVxuICAgICAgLnJldHVybmluZygpO1xuICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB0cmFuc2FjdGlvbjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVJld2FyZFBvaW50cyh1c2VySWQ6IG51bWJlciwgcG9pbnRzOiBudW1iZXIpOiBQcm9taXNlPFJld2FyZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IFtyZXdhcmRdID0gYXdhaXQgZGJcbiAgICAgIC5pbnNlcnQoUmV3YXJkcylcbiAgICAgIC52YWx1ZXMoe1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHBvaW50cyxcbiAgICAgICAgbmFtZTogJ1BvaW50cyBSZXdhcmQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1BvaW50cyBlYXJuZWQgZnJvbSB3YXN0ZSByZXBvcnRpbmcnLFxuICAgICAgICBjb2xsZWN0aW9uSW5mbzogJ0F1dG9tYXRpY2FsbHkgY29sbGVjdGVkJyxcbiAgICAgICAgbGV2ZWw6IE1hdGguZmxvb3IocG9pbnRzIC8gMTAwKSArIDFcbiAgICAgIH0pXG4gICAgICAucmV0dXJuaW5nKCk7XG4gICAgcmV0dXJuIHJld2FyZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyByZXdhcmQgcG9pbnRzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsUmV3YXJkcygpOiBQcm9taXNlPFJld2FyZFtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmV3YXJkcyA9IGF3YWl0IGRiXG4gICAgICAuc2VsZWN0KHtcbiAgICAgICAgaWQ6IFJld2FyZHMuaWQsXG4gICAgICAgIHVzZXJJZDogUmV3YXJkcy51c2VySWQsXG4gICAgICAgIHBvaW50czogUmV3YXJkcy5wb2ludHMsXG4gICAgICAgIGxldmVsOiBSZXdhcmRzLmxldmVsLFxuICAgICAgICBjcmVhdGVkQXQ6IFJld2FyZHMuY3JlYXRlZEF0LFxuICAgICAgICB1c2VyTmFtZTogVXNlcnMubmFtZVxuICAgICAgfSlcbiAgICAgIC5mcm9tKFJld2FyZHMpXG4gICAgICAubGVmdEpvaW4oVXNlcnMsIGVxKFJld2FyZHMudXNlcklkLCBVc2Vycy5pZCkpXG4gICAgICAub3JkZXJCeShkZXNjKFJld2FyZHMucG9pbnRzKSk7XG4gICAgcmV0dXJuIHJld2FyZHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYWxsIHJld2FyZHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlUmV3YXJkcyh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8UmV3YXJkW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXdhcmRzID0gYXdhaXQgZGJcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLmZyb20oUmV3YXJkcylcbiAgICAgIC53aGVyZShlcShSZXdhcmRzLnVzZXJJZCwgdXNlcklkKSlcbiAgICAgIC5vcmRlckJ5KGRlc2MoUmV3YXJkcy5jcmVhdGVkQXQpKTtcbiAgICByZXR1cm4gcmV3YXJkcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhdmFpbGFibGUgcmV3YXJkczonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWRlZW1SZXdhcmQodXNlcklkOiBudW1iZXIsIHBvaW50czogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgY3JlYXRlVHJhbnNhY3Rpb24odXNlcklkLCAncmVkZWVtZWQnLCBwb2ludHMsIGBSZWRlZW1lZCAke3BvaW50c30gcG9pbnRzYCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVkZWVtaW5nIHJld2FyZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdhc3RlTG9jYXRpb25TdGF0dXMoXG4gIGxvY2F0aW9uSWQ6IG51bWJlcixcbiAgdXNlcklkOiBudW1iZXIsXG4gIHN0YXR1czogc3RyaW5nLFxuICB2ZXJpZmljYXRpb25SZXN1bHQ6IGFueVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcG9pbnRzID0gY2FsY3VsYXRlUG9pbnRzKFxuICAgICAgdmVyaWZpY2F0aW9uUmVzdWx0LmRpZmZpY3VsdHkgfHwgJ01lZGl1bScsIFxuICAgICAgcGFyc2VGbG9hdCh2ZXJpZmljYXRpb25SZXN1bHQucXVhbnRpdHkpIHx8IDBcbiAgICApO1xuICAgIFxuICAgIGF3YWl0IGNyZWF0ZVRyYW5zYWN0aW9uKHVzZXJJZCwgJ2Vhcm5lZF9jb2xsZWN0JywgcG9pbnRzLCBgQ29tcGxldGVkIHdhc3RlIGNvbGxlY3Rpb24gdGFza2ApO1xuICAgIGF3YWl0IHVwZGF0ZVJld2FyZFBvaW50cyh1c2VySWQsIHBvaW50cyk7XG5cbiAgICBub3RpZmljYXRpb25zLnB1c2goe1xuICAgICAgaWQ6IG5leHROb3RpZmljYXRpb25JZCsrLFxuICAgICAgdXNlcklkLFxuICAgICAgbWVzc2FnZTogYFlvdSd2ZSBlYXJuZWQgJHtwb2ludHN9IHBvaW50cyBmb3IgY29sbGVjdGluZyB3YXN0ZSFgLFxuICAgICAgdHlwZTogJ3Jld2FyZCcsXG4gICAgICByZWFkOiBmYWxzZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHdhc3RlIGxvY2F0aW9uIHN0YXR1czonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJkYiIsIlVzZXJzIiwiUmV3YXJkcyIsIlRyYW5zYWN0aW9ucyIsImVxIiwiZGVzYyIsIm5vdGlmaWNhdGlvbnMiLCJyZXBvcnRzIiwibmV4dFJlcG9ydElkIiwibmV4dE5vdGlmaWNhdGlvbklkIiwiY3JlYXRlVXNlciIsImVtYWlsIiwibmFtZSIsIm5ld1VzZXIiLCJpbnNlcnQiLCJ2YWx1ZXMiLCJ0b3RhbFBvaW50cyIsInRvdGFsV2FzdGUiLCJ0b3RhbFJlcG9ydHMiLCJvbkNvbmZsaWN0RG9Ob3RoaW5nIiwicmV0dXJuaW5nIiwiZXhpc3RpbmdVc2VyIiwic2VsZWN0IiwiZnJvbSIsIndoZXJlIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2V0VXNlckJ5RW1haWwiLCJ1c2VyIiwiY2FsY3VsYXRlUG9pbnRzIiwiZGlmZmljdWx0eSIsImFtb3VudCIsImJhc2VQb2ludHMiLCJtdWx0aXBsaWVyIiwiTWF0aCIsImZsb29yIiwiY3JlYXRlUmVwb3J0IiwidXNlcklkIiwibG9jYXRpb24iLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIndhc3RlVHlwZSIsImltYWdlVXJsIiwibnVtZXJpY0Ftb3VudCIsInBhcnNlRmxvYXQiLCJtYXRjaCIsInBvaW50cyIsInJlcG9ydCIsImlkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidW5zaGlmdCIsInVwZGF0ZSIsInNldCIsInJhdyIsImNyZWF0ZVRyYW5zYWN0aW9uIiwidXBkYXRlUmV3YXJkUG9pbnRzIiwicHVzaCIsIm1lc3NhZ2UiLCJ0eXBlIiwicmVhZCIsImdldFJlY2VudFJlcG9ydHMiLCJsaW1pdCIsInNsaWNlIiwiZ2V0VW5yZWFkTm90aWZpY2F0aW9ucyIsImZpbHRlciIsIm4iLCJtYXJrTm90aWZpY2F0aW9uQXNSZWFkIiwibm90aWZpY2F0aW9uSWQiLCJub3RpZmljYXRpb24iLCJmaW5kIiwiZ2V0UmV3YXJkVHJhbnNhY3Rpb25zIiwidHJhbnNhY3Rpb25zIiwib3JkZXJCeSIsImRlc2NyaXB0aW9uIiwidHJhbnNhY3Rpb24iLCJyZXdhcmQiLCJjb2xsZWN0aW9uSW5mbyIsImxldmVsIiwiZ2V0QWxsUmV3YXJkcyIsInJld2FyZHMiLCJ1c2VyTmFtZSIsImxlZnRKb2luIiwiZ2V0QXZhaWxhYmxlUmV3YXJkcyIsInJlZGVlbVJld2FyZCIsInVwZGF0ZVdhc3RlTG9jYXRpb25TdGF0dXMiLCJsb2NhdGlvbklkIiwic3RhdHVzIiwidmVyaWZpY2F0aW9uUmVzdWx0IiwicXVhbnRpdHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/utils/db/actions.ts\n"));

/***/ })

});